<p align="center">
 <a href="./README.fa.md">
   English
 </a>
</p>

# 🤖 ربات انتقال محتوا از تلگرام به بله

رباتی تمام‌اتوماتیک با پایتون که پیام‌های دریافتی از کانال‌های مشخص تلگرام (متن، عکس، ویدیو و فایل‌ها) را به کانال پیام رسان بله شما از طریق API ربات بله ارسال می‌کند.

---

## 🚀 امکانات

- ✅ ارسال **پیام‌های متنی**
- 🖼 ارسال **تصاویر** با استفاده از متد `sendPhoto` بله
- 📹 ارسال **ویدیوها** با استفاده از متد `sendVideo` بله
- 📄 ارسال **سندها** (فایل‌ها) به‌صورت مستقیم
- 🔁 تلاش خودکار تا ۳ بار برای ارسال فایل در صورت شکست
- 🖼 تولید تصویر پیش‌نمایش در صورت شکست ارسال ویدیو با استفاده از `ffmpeg`
- ⚙️ تشخیص خودکار نوع فایل و انتخاب متد مناسب API بله
- 📡 پشتیبانی از systemd برای اجرای خودکار پس از ریبوت
- 🧰 ابزار خط فرمان (`teltobale`) برای کنترل سریع

---

## 🔑 نیازمندی‌ها

برای استفاده از این ربات، به چند کلید و شناسه نیاز دارید. در جدول زیر، توضیحات و روش دریافت آن‌ها آورده شده است:

| نام | توضیح | روش دریافت |
|-----|-------|------------|
| **API ID** | شناسه API اپلیکیشن تلگرام شما | از [my.telegram.org](https://my.telegram.org/auth) اپ بسازید و API ID بگیرید. |
| **API Hash** | کد محرمانه مربوط به اپ تلگرام شما | همراه با API ID در پنل توسعه‌دهنده تلگرام قابل دریافت است. |
| **شماره تلفن** | شماره‌ای که با آن به تلگرام لاگین می‌کنید | با فرمت بین‌المللی وارد کنید (مثلاً: ‎`+989123456789`). |
| **توکن ربات بله** | توکن رباتی که در بله ساخته‌اید | در [tapi.bale.ai](https://tapi.bale.ai) ربات بسازید و توکن را دریافت کنید. با `bot...` شروع می‌شود. |
| **شناسه عددی چت کانال بله** | آیدی عددی کانال بله شما | ربات را ادمین کانال بله کنید، یک پیام ارسال کنید و سپس با زدن این آدرس: `https://tapi.bale.ai/bot<توکن>/getUpdates` آیدی عددی را بردارید. |
| **کانال‌های تلگرام** | لیست نام کاربری کانال‌های تلگرام برای مانیتورینگ | مثال: `@newsch1,@mediahub2` (باید عضو آن‌ها باشید). |

> ⚠️ حتماً ربات بله را به عنوان **ادمین** در کانال بله خود اضافه کنید.

---

## 📦 پیش‌نیازها

- پایتون نسخه ۳.۷ یا بالاتر
- سیستم‌عامل لینوکس Debian/Ubuntu (پیشنهاد می‌شود)
- نصب بودن `ffmpeg`
- دسترسی به اینترنت (برای تلگرام و بله)

---

## ⚙️ نصب سریع

تنها با یک خط دستور زیر:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/ach1992/telegram-to-bale/main/install.sh)
```

این دستور:

- پروژه را کلون می‌کند
- پیش‌نیازها را نصب می‌کند
- اطلاعات تلگرام و بله را از شما می‌گیرد
- فایل session را ایجاد می‌کند
- سرویس systemd را می‌سازد و اجرا می‌کند
- ابزار `teltobale` را نصب می‌کند

---

## 🔁 اجرای ربات

بعد از نصب، ربات به‌صورت خودکار در پس‌زمینه اجرا می‌شود. برای بررسی یا کنترل آن:

```bash
sudo systemctl status tg2bale.service
sudo systemctl restart tg2bale.service
```

---

## 💻 ابزار خط فرمان: teltobale

ابزاری جهانی برای کنترل سریع ربات:

```bash
teltobale status     # بررسی وضعیت ربات
teltobale restart    # ریستارت ربات
teltobale stop       # توقف ربات
teltobale uninstall  # حذف کامل ربات
```

---

## 🧪 تنظیم برای توسعه‌دهنده‌ها

```bash
git clone https://github.com/ach1992/telegram-to-bale.git
cd telegram-to-bale
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
python setup.py
```

---

## 🧼 حذف کامل

```bash
teltobale uninstall
```

---

## 📁 ساختار پروژه

```
├── main.py               # منطق اصلی ربات
├── cli.py                # ابزار خط فرمان
├── setup.py              # جادوی نصب و تنظیم
├── setup.sh              # اسکریپت نصب کامل
├── install.sh            # نصب با curl
├── uninstall.sh          # حذف کامل
├── requirements.txt
├── .env                  # فایل محیطی (به‌صورت خودکار ساخته می‌شود)
├── temp/                 # پوشه موقت برای فایل‌های دانلودی
```

---

## ❗ رفع مشکلات

### رسانه‌ها ارسال نمی‌شوند؟
- پسوند فایل بررسی شود و `ffmpeg` نصب باشد.

### ارور ۴۰۱ یا ۴۰۳ از بله؟
- احتمالاً ربات به عنوان ادمین به کانال اضافه نشده یا توکن اشتباه است.

### لاگین به تلگرام با شکست مواجه می‌شود؟
- بررسی کنید سرور شما توسط تلگرام مسدود نشده باشد.

---

## 📃 مجوز

مجوز MIT © ۲۰۲۵ ach1992

---

## ⭐ تاریخچه ستاره‌ها

[![Stargazers over time](https://starchart.cc/ach1992/telegram-to-bale.svg)](https://starchart.cc/ach1992/telegram-to-bale)
